= Отключение проверки прав доступа для определённого поискового запроса

Администратор может отключить проверку прав доступа для определённых поисковых запросов. Данная настройка является аналогом отключения проверки прав доступа на обычных папках.

Настройка должна выполняться администратором, быть включена на уровне базы данных, а также быть активирована индивидуально для каждого поискового запроса.

[[DisableSecurityOnSearch__steps_z4l_rd1_3qb]]
[NOTE]
====
[.note__title]#Важное замечание:#

Флаг *Отключить проверку прав* не может быть установлен для поисковых запросов, содержащих поисковые слова или параметр. Запрос можно отредактировать, добавив к нему поисковые слова или параметр, но после сохранения такого запроса флаг *Отключить проверку прав* будет сброшен.
====

Для отключения проверки прав доступа для поисковых запросов необходимо:

. В базе данных выполните настройку `DisableSecurityOnSearchAllowed =                         1` для таблицы `dvsys_settings`, чтобы запустить хранимую процедуру `dvsys_setting_set` с требуемыми параметрами. Выполните следующий запрос:#
+
Для Microsoft SQL:

[source,pre,codeblock,language-sql]
----
declare @on bit = 1
exec dvsys_setting_set N'DisableSecurityOnSearchAllowed', @on
----

Для PostgreSQL:

[source,pre,codeblock,language-sql]
----
DO $$
declare val_value sql_variant = true::sql_variant;
BEGIN
  perform * from public."dvsys_setting_set"('DisableSecurityOnSearchAllowed', val_value);
END $$;
----
. В РМА нажмите на кнопку *Расширенный поиск* .image:Buttons/AdvancedSearch.png[image], чтобы открыть редактор поисковых запросов.
. Создайте новый поисковый запрос, нажмите *Сохранить как...*.
. В открывшемся окне введите название поискового запроса, в правой области, внизу поставьте флаг напротив *Отключить проверку прав*, нажмите *Сохранить*.
+
image::AdvancedSearchQuery.png[Создание нового поискового запроса]

[[DisableSecurityOnSearch__postreq_qdv_5n1_3qb]]
Используйте данный поисковой запрос при создании новой виртуальной папки, чтобы отключить проверку прав доступа.

