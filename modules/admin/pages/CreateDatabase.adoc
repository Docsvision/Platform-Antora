= Создание новой базы данных {dv}

. Откройте xref:DatabasesMaster.adoc[мастер БД {dv}].
+
image::DatabaseMaster.png[Мастер БД {dv}]
. Выберите режим "Создать новую базу данных и подключить ее к серверу". Нажмите *Далее*.
. Укажите информацию для создания БД. Нажмите *Далее*.
+
image::DatabaseCreate_1.png[Настройка подключения к СУБД]
+
[[task_dmg_5rf_l2b__AttachDb]]
* *Тип сервера* -- тип используемой СУБД:
+
** Microsoft SQL Server;
** PostgreSQL.
* *Имя сервера* -- сетевое имя сервера/экземпляра СУБД (например: "sql.company.com"). Для БД PostgreSQL имя сервера следует указывать без домена (например, "postgre", а не "postgre.company.com") -- не следует использовать IP и имя LOCALHOST;
* *Порт* (только для PostgreSQL) -- порт подключения к СУБД (в PostgreSQL по умолчанию используется порт 5432);
* *Проверка подлинности* -- тип проверки подлинности, используемой для подключения к СУБД:
** SQL Server -- аутентификация с помощью учетной записи, зарегистрированной в СУБД;
** Windows -- аутентификация с помощью текущей учетной записи Windows.
+
[NOTE]
====
См. xref:WindowsAccountSingularity.adoc[Особенности использования SQL-аутентификация и аутентификация Windows при подключении к БД {dv}].
====
* *Логин*, *Пароль* -- данные учетной записи для подключения к СУБД.
. Укажите параметры создания БД и нажмите *Далее*.
+
image::DatabaseCreate_2.png[Настройка создания БД в Microsoft SQL Server]
[loweralpha]
.. Укажите основные параметры БД:#
+
* *Имя* -- название БД, с которым она будет создана в СУБД;
* *Псевдоним* -- псевдоним БД, с которым она будет зарегистрирована в {dv}; обычно совпадает с именем БД;
+
[NOTE]
====
[.note__title]#Important:# Псевдоним должен быть уникальным в пределах данного сервера {dv}.
====
* *Размещение* (только для MS SQL) -- определяет расположение файлов БД на сервере СУБД:
** Стандартное -- расположение файлов определяется настройками СУБД;
** Другое -- расположение файлов БД указывается администратором; данный вариант размещения применим, если серверная часть модуля {pl} и СУБД установлены на одном компьютере;
* *Язык* (только для MS SQL) -- язык создаваемой БД. Следует выбирать локаль, которая установлена в параметре _Server Collation_ (способ сортировки данных в таблицах) экземпляра Microsoft SQL Server. Рекомендуемое значение: "Cyrillic_General_CI_AS" (Русский).
.. *Только для БД Microsoft SQL Server*. Если требуется, включите создание сателлитных баз данных. Для этого нажмите кнопку *Настройки* и выберите данные, которые должны храниться в отдельных базах данных. Подробности в пункте xref:DBExternalTables.adoc[Подключение сателлитных баз данных].
+
По умолчанию использование сателлитных БД отключено.
. Если требуется, выберите собственный SQL-скрипт, используемый для создания базы данных. Нажмите *Далее*.
+
image::DatabaseCreate_3.png[Выбор SQL-скрипта для создания базы данных]
+
* *Стандартный* -- использовать стандартные скрипты {dv} для создания БД;
* *Другой* -- использовать собственный скрипт для создания БД.
. Выберите библиотеки карточек для загрузки в новую БД. По умолчанию будут выбраны все библиотеки, которые можно загрузить. Нажмите *Далее*.
+
image::LibrariesToLoadInNewDB.png[Выбор модулей для загрузки]
+
Выбор библиотеки для загрузки осуществляется установкой флажка в строке соответствующей библиотеки. Рекомендуется выбрать все доступные библиотеки карточек.

[NOTE]
====
Для работы с соответствующим модулем и зависимыми от него модулями, должна быть загружена его библиотека карточек.
====
. Подтвердите параметры, которые будут использованы при создании базы данных. Нажмите *Далее*.
+
image::DatabaseCreate_4.png[Подтверждение параметров создания БД]
+
[[task_dmg_5rf_l2b__SetTimeout]]
Значение *Ожидать завершения атомарной операции на SQL Server (сек)* определяет максимальное время ожидания завершения отдельного этапа (операции) процедуры создания/подключения БД. Если операция не будет выполнена за указанное время, она завершится с ошибкой.

[NOTE]
====
Параметр *Ожидать завершения атомарной операции на SQL Server (сек)* не ограничивает время выполнения пользовательских операций (при работе в Windows-клиенте) -- будет применяться стандартное ограничение 600 секунд.
====
. Дождитесь завершения инициализации БД и загрузки SQL объектов.

Следующие шаги выполняются только при создании новой БД из "Консоли администрирования {dv}". При первоначальной настройке {dv} загрузка дополнительных модулей выполняется _Мастером настройки {dv}_.

[start=9]
. Выберите модули {dv}, данные которых должны быть загружены в БД. Нажмите *Завершить*.
+
image::DatabaseCreate_5.png[Выбор модулей, настройки которых будут загружены в БД]
+
Если настройки модуля {dv} не загружены в БД, работа с данным модулем будет невозможна. Если библиотеки карточек выбранных модулей не были загружены в БД, они будут загружены принудительно.
. Согласитесь с перезапуском сервисов {dv} для применения новых параметров.
+
image::ConfigMaster_7.png[Запрос на перезапуск сервисов {dv}]
. Чтобы назначить созданную БД основной, следуйте инструкции xref:ChoiceDefaultDatabase.adoc[Назначение базы данных по умолчанию].
+
Основная БД -- база данных, с которой работают пользователи, если при подключении к серверу не выбрана иная БД. Сервисы {dv} также работают с основной БД.
. Предоставьте сервисам {dv} указанные в пункте xref:GrantAccessServices.adoc[Настройка учетных записей сервисов {dv}] права.

