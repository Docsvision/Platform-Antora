= Настройка правила помещения в хранилище

Администратор должен настроить правила, в соответствии с которыми файлы будут распределяться между группами хранилищ. Если группа не участвует в правилах и не является xref:SetDefaultStorage.adoc[группой хранилищ по умолчанию] для какого-либо класса файлов, хранилища из этой группы не будут использоваться для сохранения файлов, если хранилища не входят в другие группы.

. Откройте страницу настроек "Внешние хранилища":#
[loweralpha]
.. Откройте Консоль настройки {dv}.
.. Перейдите в раздел настроек *Настройки сервера* > *Базы данных*#.
.. Выберите настраиваемую базу данных и нажмите на кнопку *Настройки*. Будет открыто окно [.keyword .wintitle]*Свойства и управление базой данных*.
.. Откройте вкладку [.keyword .wintitle]*Внешние хранилища*.
. Нажмите на кнопку .image:Buttons/StorageAdd.png[image] в блоке настроек [.keyword .wintitle]*Правила помещения в хранилища*. Будет открыто окно настройки правила выбора группы хранилищ.
+
image::CreateRuleToStorageGroup.png[Окно настройки правила выбора группы хранилищ]
. Настройте параметры правила хранилища:#
[loweralpha]
.. В поле [.kbd .ph .userinput]`Название` введите уникальное имя правила.
.. В списке [.kbd .ph .userinput]`Группа` выберите группу хранилищ, которая будет выбираться по данному правилу.
.. В списке [.kbd .ph .userinput]`Тип` выберите тип условия в правиле:#
+
* "Все файлы" – если условию будет соответствовать любой файл (ограничений нет);
* "По расширению файла" – если условию будет соответствовать файл с определенным расширением (можно указать несколько расширений);
* "Файл с размером большим чем" – если условию будет соответствовать файл с размером, превышающим заданное значение;
* "Файл с размером меньшим чем" – если условию будет соответствовать файл с размером, не превышающим заданное значение;
* "Файл справочника" – если файл является файлом справочника {dv} (например, файл разметки, файл представления, иконка и т.п.);
* "Системный файл" – если у загружаемого в {dv} файла установлен признак "Системный";
* "Добавить из сборки…" – если алгоритм условия реализован в выбранным компоненте (файл DLL).
. В блоке настроек [.keyword .wintitle]*Свойства* укажите дополнительные настройки правила:#
+
* для типа "По расширению файла":
** [.kbd .ph .userinput]`Типы файлов (*.jpg;*.mp3;*.tiff)` – расширения файлов (перечисляются через символ ";"), выбираемых по данному условию, в формате "*.txt";
* для типа "Файл с размером большим чем":
** [.kbd .ph .userinput]`Размер` – минимальный размер файлов (в КБ), которые соответствуют условию;
* для типа "Файл с размером меньшим чем":
** [.kbd .ph .userinput]`Размер` – максимальный размер файлов (в КБ), которые соответствуют условию.
. Нажмите на кнопку *ОК*. Правило будет добавлено в список правил.
. Измените приоритет использования правила:#
* нажмите на кнопку .image:Buttons/ArrowUp.png[image], чтобы повысить приоритет правила;
* нажмите на кнопку .image:Buttons/ArrowDown.png[image], чтобы понизить приоритет правила.
+
При выполнении условий одновременно в нескольких правилах, будет выбрана группа хранилищ из правила с более высоким приоритетом.
+
Новая конфигурация будет применена в течение 10 минут.

* Для изменения настроек правила: выберите его в списке [.keyword .wintitle]*Правила помещения в хранилища* и нажмите на кнопку .image:Buttons/StorageEdit.png[image]. Тип правила не может быть изменен.
* Для удаления правила: выберите его в списке [.keyword .wintitle]*Правила помещения в хранилища* и нажмите на кнопку .image:Buttons/StorageDelete.png[image].

