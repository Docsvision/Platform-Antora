= Подключение к серверу {dv} существующей базы данных

[NOTE]
====
[.note__title]#Важное замечание:# Не изменяйте конфигурацию сателлитных БД при подключении существующей БД {dv} 5.5!
====

[[task_iwn_jfm_fp__steps_cgn_4fm_fp]]
. Откройте xref:DatabasesMaster.adoc[мастер БД {dv}].
+
image::DatabaseMaster.png[Мастер БД {dv}]
. Выберите режим "Подключить существующую базу данных, не представленную в списке". Нажмите *Далее*.
. Укажите данные для подключения к СУБД. Нажмите *Далее*.
+
image::DatabaseAttach_1.png[Мастер БД {dv} в режиме подключения базы данных]
+
* *Тип сервера* -- тип используемой СУБД:
+
** Microsoft SQL Server;
** PostgreSQL.
* *Имя сервера* -- сетевое имя сервера/экземпляра СУБД (например: "sql.company.com"). Для БД PostgreSQL имя сервера следует указывать без домена (например, "postgre", а не "postgre.company.com") -- не следует использовать IP и имя LOCALHOST;
* *Порт* (только для PostgreSQL) -- порт подключения к СУБД (в PostgreSQL по умолчанию используется порт 5432);
* *Проверка подлинности* -- тип проверки подлинности, используемой для подключения к СУБД:
** SQL Server -- аутентификация с помощью учетной записи, зарегистрированной в СУБД;
** Windows -- аутентификация с помощью текущей учетной записи Windows.
+
[NOTE]
====
[.note__title]#Прим.:# См. xref:WindowsAccountSingularity.adoc[Особенности использования SQL-аутентификация и аутентификация Windows при подключении к БД {dv}].
====
* *Логин*, *Пароль* -- данные учетной записи для подключения к СУБД.
. Укажите параметры подключения БД и нажмите *Далее*.
+
image::DatabaseAttach_2.png[Мастер БД {dv} в режиме подключения базы данных]
[loweralpha]
.. Укажите основные параметры БД:#
+
* *Имя* -- название подключаемой БД;
* *Псевдоним* -- псевдоним БД, с которым она будет зарегистрирована в {dv}; обычно совпадает с именем БД. *Псевдоним должен быть уникальным* в пределах данного сервера {dv};
.. Нажмите кнопку *Настройки*, если требуется изменить конфигурацию xref:DBExternalTables.adoc[сателлитных баз данных] (только при подключении БД {dv} версии 5.4) и использования отдельных xref:DBTempTables.adoc[служебных таблиц].
+
При подключении БД {dv} 5.5 сохраняется существующая (в данной БД) конфигурация сателлитных БД и служебных таблиц.
+
[NOTE]
====
[.note__title]#Важное замечание:# Не рекомендуется изменять конфигурацию сателлитных БД (включать/отключать использование), если подключается БД {dv} версии 5.5, т.к. при этом часть данных станет недоступна -- данные между хранилищами не переносятся (из основной в сателлитную БД или из сателлитной в основную).
====
. На следующей странице мастера нужно выбрать обновляемые библиотеки карточек модулей. По умолчанию будут выбраны все библиотеки, требующие обновления. Если необходимо, измените выбор. Нажмите *Далее* для продолжения.
+
image::updateDbOnAttach.png[Выбор модулей для обновления]
. Подтвердите параметры подключения базы данных.
+
image::DatabaseAttach_3.png[Подтверждение параметров подключения БД]
+
Значение *Ожидать завершения атомарной операции на SQL Server (сек)* определяет максимальное время ожидания завершения отдельного этапа (операции) процедуры создания/подключения БД. Если операция не будет выполнена за указанное время, она завершится с ошибкой.

[NOTE]
====
[.note__title]#Прим.:# Параметр *Ожидать завершения атомарной операции на SQL Server (сек)* не ограничивает время выполнения пользовательских операций (при работе в Windows-клиенте) -- будет применяться стандартное ограничение 600 секунд.
====
+
Если выбранная база данных подключена (или была подключена ранее) к другому серверу {dv}, и лицензия {dv} не позволяет работать с одной БД одновременно нескольким серверам {dv}, то при нажатии кнопки *Далее* на экран будет выведено окно для выбора варианта отключения БД.

image::Database_Wizard_Parallel_Servers.png[Диалоговое окно "Внимание: параллельные серверы"]

Нажмите на кнопку *Продолжить*, чтобы система автоматически отключила БД от других серверов {dv}.

Данная процедура подразумевает, что БД будет перемещена (переключена) с одного сервера {dv} на другой. Дополнительная информация приведена в разделе xref:DatabaseMoving.adoc[Перенос БД {dv} между серверами {dv}].

Следующие шаги 7-10 выполняются только, если требуется обновление БД.

[start=7]
. Дождитесь завершения загрузки SQL объектов.

Следующие шаги выполняются только при подключении БД из "Консоли администрирования {dv}". При первоначальной настройке {dv} загрузка дополнительных модулей выполняется _Мастером настройки {dv}_.

[start=8]
. Выберите модули {dv}, настройки которых должны быть загружены в БД.
+
image::DatabaseCreate_5.png[Выбор модулей, настройки которых будут загружены в БД]
+
Существующие в БД настройки загружаемых модулей будут перезаписаны.
. Дождитесь завершения загрузки настроек.
. Согласитесь с перезапуском сервисов {dv} для применения новых параметров.
+
image::configMasterReload.png[Запрос на перезапуск сервисов {dv}]
. Предоставьте сервисам {dv} xref:GrantAccessServices.adoc[необходимые права] (в т.ч. права на новую БД).

