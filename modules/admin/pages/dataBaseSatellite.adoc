= Подключить сателлитные базы данных

CAUTION: Рассмотренная далее функция доступна, только если БД {dv} размещается в СУБД Microsoft SQL Server.

Архивные карточки, системные данные и журналы работы {dv} могут храниться в основной базе данных {dv}, или быть вынесены в отдельные (сателлитные) базы данных. Использование сателлитных баз данных позволяет облегчить обслуживание основной базы {dv}, сократить время на создание её резервных копий и т.п.

Место хранения архивных карточек, системных данных и журналов работы {dv} определяется администратором при xref:dataBaseСreateNew.adoc[создании новой] базы данных {dv} и при xref:dataBaseConnect.adoc[подключении БД], для которой не принималось решение о способе хранения указанных данных.

По умолчанию данные будут храниться в основной БД {dv} -- сателлитные БД не подключаются.

.Перед подключением сателлитных БД обратите внимание:
[IMPORTANT]
====
* Сателлитные БД могут быть подключены только при создании новой БД и при подключении существующей БД. В процессе работы с {dv} переключиться на использование сателлитных БД или отключить сателлитные БД нельзя. Исключение приведено в пункте xref:dataBaseLogToSatellite.adoc[Изменение места хранения журналов с основной БД на сателлитную].
* При подключении существующей БД {dv} 5.5 будет применена существующая в данной БД конфигурация сателлитов.
+
include::partial$excerpts.adoc[tags=satellite]
====

Настройте способ хранения архивных карточек, системных данных и журналов работы. Для этого нажмите на кнопку *Настройки* в xref:serverConsoleDataBasesMaster.adoc[Мастере БД {dv}] при xref:dataBaseСreateNew.adoc[создании БД] или xref:dataBaseConnect.adoc[подключении БД].

.Кнопка для открытия панели настроек создания и подключения БД
image::openAdvancedConfigButton.png[Кнопка для открытия панели настроек создания и подключения БД]

Будет открыто окно *Настройки генерации скрипта*.

.Настройки генерации скрипта
image::DatabaseCreate_2_params.png[Настройки генерации скрипта]

.Настройка размещения таблиц осуществляется с помощью трех параметров:
* *UseOuterArchive* -- определяет, должна ли для хранения архивных карточек использоваться сателлитная БД.
+
При включенной настройке (значение *_True_*) для хранения архивных карточек будет создана отдельная БД с названием *Название-БД-Docsvision_Archive*.
+
При выключенной настройке (значение *_False_*) архивные карточки будут храниться в основной БД {dv}. Дополнительная информация приведена в пункте xref:archiveData.adoc[Особенности хранения архивных данных в {dv}].
+
[WARNING]
====
Если Ваша лицензия {dv} не содержит опцию _{dv} Архивная база данных_, параметр `UseOuterArchive` должен быть в значении *_False_*, иначе работа с архивными карточками завершится ошибкой.
====
+
* *UseOuterLog* -- определяет, должна ли для хранения журналов использоваться сателлитная БД.
+
При включенной настройке (значение *_True_*) для хранения журналов будет создана отдельная БД с названием `Название-БД-Docsvision_Log`.
+
При выключенной настройке (значение *_False_*) журналы будут храниться в основной БД {dv}.
+
* *UseOuterMetadata* -- определяет, должна ли для хранения системных таблиц использоваться сателлитная БД.
+
При включенной настройке (значение *_True_*) для хранения системных таблиц будет создана отдельная БД с названием `Название-БД-Docsvision_Metadata`.
+
При выключенной настройке (значение *_False_*) системные таблицы будут храниться в основной БД {dv}.
+
БД `Название-БД-Docsvision_Metadata` будет создана независимо от значения настройки *UseOuterMetadata*, если для xref:dataBaseServiceTablesLocation.adoc[служебных таблиц] выбран способ размещения *UseOuterDatabase*.

IMPORTANT: При повторном подключении БД после её создания изменять значения настроек *UseOuterArchive*, *UseOuterLog*, *UseOuterMetadata* запрещено.

CAUTION: При резервном копировании БД {dv} также следует создавать резервные копии сателлитных баз данных (если используются): *_Archive* (обязательно), *_Metadata* (рекомендуется) и *_Log* (необязательно).

WARNING: После создания БД изменять конфигурацию сателлитных БД не рекомендуется. Это может привести к потере данных.
