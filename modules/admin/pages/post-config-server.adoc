= Действия после первоначальной настройки сервера

[#accountsSetup]
== Настройка учетных записей сервисов {dv}

.Серверная часть модуля {pl} устанавливает в ОС Windows собственные сервисы:
Сервер {dv}::
Включает службу *{sss}* и веб-приложение сервера {dv} в IIS. Обеспечивает возможность подключения клиентских приложений.
Сервис полнотекстового индексирования::
*{fts}*. Обеспечивает индексацию данных в БД {dv}.
Файловый сервис::
*{fss}*. Удаляет файлы из хранилища бинарных данных файлов, а также переносит бинарные данные файлов из одного хранилища в другое.

Администратор должен самостоятельно настроить права учетных записей служб xref:ROOT:requirements-server-account.adoc[сервера {dv}], сервиса xref:ROOT:requirements-full-text-account.adoc[полнотекстового поиска] и xref:ROOT:requirements-file-service-account.adoc[файлового сервиса].

Рекомендуется xref:manage-licenses.adoc#personalLicense[назначить персональную лицензию] учетной записи указанных сервисов.

[#authentication]
== Настройки проверки подлинности в IIS

Настройки проверки подлинности для IIS версии 8 или 7.5:

. Откройте настройки приложения {dv} в программе _Диспетчер служб IIS_.
. Перейдите в раздел настроек _Проверка подлинности_.
+
.Настройка "Проверка подлинности" в параметрах приложения "DocsVision" в IIS
image::iis-authentication.png[Настройка "Проверка подлинности" в параметрах приложения "DocsVision" в IIS]
+
. На уровне приложения `{dv}` включите _Проверку подлинности Windows_, если она отключена.
+
[TIP]
====
Если вы используете IIS версии 7.0 и наблюдаете проблемы с быстродействием при настройке проверки подлинности Windows с протоколом Kerberos, проследуйте рекомендациями из https://support.microsoft.com/en-us/topic/fix-you-may-experience-slow-performance-when-you-use-integrated-windows-authentication-together-with-the-kerberos-authentication-protocol-in-iis-6-0-0c2cc1c1-7ed2-cbd1-9f61-6d594dbda77f[этой] статьи (сохранённый скриншот статьи xref:attachment$iis7.png[здесь]).
====
+
. На уровне приложения {dv} разрешите _Анонимную проверку подинности_, чтобы можно было скачивать страницы типа `StartPage.aspx`, `InfoPage.aspx`, и.т.д.
. На уровне `{dv}/StorageServer` запретите _Анонимную проверку подинности_, чтобы к web-сервису мог подключаться только прошедший аутентификацию пользователь.
. На уровне `{dv}/App_Code/Controllers` также запретите _Анонимную проверку подлинности_, чтобы к REST мог подключаться только прошедший аутентификацию пользователь.
. Отключите 32-разрядный режим пула приложений.
+
[#x32]
IMPORTANT: Веб-сервис сервера {dv} должен выполняться в пуле приложений с 64-разрядным режимом исполнения. Убедитесь, что используется правильный режим исполнения после завершения настройки сервера {dv}.
+
[lowerroman]
.. Откройте настройки пула приложений сайта {dv} -- по умолчанию используется пул _DefaultAppPool_.
.. В дополнительных параметрах пула установите для параметра _Разрешены 32-разрядные приложения_ значение *_False_*.
+
.Настройки пула приложений
image::app-pool-settings.png[Настройки пула приложений]
+
.. Сохраните изменения.

== Настройка группы пользователей на контроллере домена

Если серверная часть модуля была установлена на компьютер, являющийся контроллером домена, нужно вручную добавить в локальную группу безопасности _{dv} Users_ пользователей, которые будут работать с системой {dv}.
