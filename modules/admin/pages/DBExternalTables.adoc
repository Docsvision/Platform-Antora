= Подключение сателлитных баз данных

*Рассмотренная далее функция доступна, только если БД {dv} размещается в СУБД Microsoft SQL Server.*

Архивные данные (карточки), системные данные и журналы работы {dv} могут храниться в основной базе данных {dv}, или быть вынесены в отдельные (сателлитные) базы данных. Использование сателлитных баз данных позволяет облегчить обслуживание основной базы {dv}, сократить время на создание её резервных копий и т.п.

Место хранения архивных карточек, системных данных и журналов работы {dv} определяется администратором при создании новой базы данных {dv} и при подключении БД, для которой не принималось решение о способе хранения указанных данных.

При настройках по умолчанию данные будут храниться в основной БД {dv} – сателлитные БД не подключаются.

[NOTE]
====
[.note__title]#Important:# Перед подключением сателлитных БД обратите внимание:

. Сателлитные БД могут быть подключены только при создании новой БД и при подключении существующей БД. В процессе работы с {dv} переключиться на использование сателлитных БД или отключить сателлитные БД нельзя. Исключение приведено в пункте xref:MoveLogToSatellite.adoc[Изменение места хранения журналов с основной БД на сателлитную].
. При подключении существующей БД {dv} 5.5 будет применена существующая (настроенная в данной БД) конфигурация сателлитов, изменять которую (подключать/отключать сателлиты) не рекомендуется, т.к. это может привести к потере доступа к части данных – при изменении конфигурации данные между хранилищами (сателлитная/основная БД) не переносятся.
====

Чтобы настроить способ хранения архивных карточек, системных данных и журналов работы, нажмите на кнопку *Настройки* в Мастере БД {dv} при xref:CreateDatabase.adoc[создании БД] или xref:AttachDatabase.adoc[подключении БД].

image::openAdvancedConfigButton.png[Кнопка для открытия панели настроек создания/подключения БД]

Будет открыта окно [.keyword .wintitle]*Настройки генерации скрипта*.

image::DatabaseCreate_2_params.png[Настройки генерации скрипта]

Настройка размещения таблиц осуществляется с помощью трех параметров:

* *UseOuterArchive* – определяет, должна ли для хранения архивных карточек использоваться сателлитная БД. При включенной настройке (значение True) для хранения архивных карточек будет создана отдельная БД с названием *\{Название БД {dv}}_Archive*. При выключенной настройке (значение False) архивные карточки будут храниться в основной БД {dv}. Дополнительная информация приведена в пункте xref:Data_OutArchiving.adoc[Особенности хранения архивных данных в {dv}].
+
[NOTE]
====
[.note__title]#Important:# Если Ваша лицензия {dv} не содержит опцию "{dv} Архивная база данных", параметр `UseOuterArchive` +++должен быть в значении "False"+++, иначе работа с архивными карточками завершится ошибкой.
====
* *UseOuterLog* – определяет, должна ли для хранения журналов использоваться сателлитная БД. При включенной настройке (значение True) для хранения журналов будет создана отдельная БД с названием *\{Название БД {dv}}_Log*. При выключенной настройке (значение False) журналы будут храниться в основной БД {dv}.
* *UseOuterMetadata* – определяет, должна ли для хранения системных таблиц использоваться сателлитная БД. При включенной настройке (значение True) для хранения системных таблиц будет создана отдельная БД с названием *\{Название БД {dv}}_Metadata*. При выключенной настройке (значение False) системные таблицы будут храниться в основной БД {dv}.
+
БД *\{Название БД {dv}}_Metadata* будет создана независимо от значения настройки `UseOuterMetadata`, если для xref:DBTempTables.adoc[служебных таблиц] выбран способ размещения "UseOuterDatabase".

[NOTE]
====
[.note__title]#Important:# После создания БД изменять значения настроек `UseOuterArchive`, `UseOuterLog`, `UseOuterMetadata` (при повторном подключении БД) запрещено.
====

*Обратите внимание:* при резервном копировании БД {dv} также следует создавать резервные копии сателлитных баз данных (если используются): _Archive (обязательно), (рекомендуется) _Metadata и _Log.

