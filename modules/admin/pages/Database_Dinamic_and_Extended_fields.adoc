[[ariaid-title1]]
== Преобразование динамических метаданных Docsvision в расширенные

Система Docsvision предоставляет возможность инженерам Docsvision добавлять (с помощью [.dfn .term]_Конструктора разметок_) в карточку новые секции и поля без фактического изменения схемы метаданных карточки (не требуется проектировать схему и загружать её в БД).

Добавляемые метаданные могут быть одного из двух типов: динамические или расширенные. Отличие типов добавляемых метаданных заключается в способе хранения данных в БД:

* значения [.dfn .term]_динамических_ полей одинакового типа для всех типов карточек сохраняются в одной таблице;
* [.dfn .term]_расширенные_ поля сохраняются в таблицах основных секций; для расширенных секций в БД создаются таблицы, аналогичные таблицам статических метаданных (вида [.ph .filepath]`dvtable_\{ИД секции}`).

Администратор Docsvision может переключить БД с используемых по умолчанию динамических метаданных на расширенные. +++Обратный переход (с расширенных на динамические метаданные) невозможен.+++

Переход с [.dfn .term]_динамических_ на [.dfn .term]_расширенные_ поля рекомендуется выполнять в случае, когда в базе данных планируется хранить большое количество карточек (десятки тысяч), в которых есть [.dfn .term]_динамические_ поля, или планируется использование сложных ролей с добавляемыми полями.

[NOTE]
====
[.note__title]#Прим.:#

* Использование [.dfn .term]_расширенных_ полей позволит повысить производительность работы базы данных за счет увеличения скорости чтения и сохранения данных всех карточек, где используются добавляемые поля, ускорить построение отчетов и выполнение других операций с карточками.
* После перевода базы на расширенные метаданные, модификация метаданных в [.dfn .term]_Конструкторе разметок_ будет приводить к изменению/добавлению таблиц и может занимать продолжительное время (до нескольких минут, в зависимости от загруженности базы данных).
====

После перевода базы на расширенные метаданные потребуется обновить (актуализировать названия таблиц, полей) код хранимых процедур модуля [.dfn .term]_Расширенные отчеты_, код собственных процедур, разработанных для ролевой модели, а также код других собственных скриптов, если в них выполняется низкоуровневая работа (на уровне БД) с данными карточек, использующих расширенные метаданные.

Для перевода БД с динамических на расширенные метаданные (необратимая операция), используйте кнопку [.ph .uicontrol]*Преобразовать* в настройках xref:ControlPanelMetadata.adoc[Метаданные] базы данных.

image::img/ControlPanelMetadata.png[[.fig--title-label]##Рис. 1. ##Настройка метаданных в Консоли настройки Docsvision]

[#task_ydf_ywx_lt__fulltext_search .ph]#Если создание индексов полнотекстового поиска было выполнено при использовании в базе [.dfn .term]_динамических_ полей, после выполнения конвертирования базы на [.dfn .term]_расширенные_ метаданные для работы поиска нужно повторить операцию создания индексов.#

*На уровень выше:* xref:../topics/Database.adoc[Управление базами данных]
