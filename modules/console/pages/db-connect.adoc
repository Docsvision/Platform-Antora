= Подключить существующую базу данных

[WARNING]
====
Не изменяйте конфигурацию сателлитных БД при подключении существующей БД {dv}!
====

. Откройте xref:db-master.adoc[мастер БД {dv}].
+
.Мастер БД {dv}
image::admin:db-connect.png[Мастер БД {dv}]
+
. Выберите режим *Подключить существующую базу данных, не представленную в списке*. Нажмите *Далее*.
. Укажите данные для подключения к СУБД. Нажмите *Далее*.
+
.Мастер БД {dv} в режиме подключения базы данных
image::6.1@platform:admin:db-create-start.png[Мастер БД {dv} в режиме подключения базы данных]
+
****
.. Нажмите кнопку *Настройки*, если требуется изменить конфигурацию сателлитных баз данныхfootnote:[Только при подключении БД {dv} версии 5.4 и использования отдельных служебных таблиц. Подробнее см. разделы "xref:6.1@platform:console:db-satellite.adoc[]" и "xref:6.1@platform:console:db-service-tables.adoc[]" в документации модуля {pl}].
+
При подключении БД {dv} сохраняется существующая в данной БД конфигурация сателлитных БД и служебных таблиц.
+
[WARNING]
====
include::6.1@platform:admin:partial$excerpts.adoc[tags=satellite]
====
****
+
. На следующей странице мастера нужно выбрать обновляемые библиотеки карточек модулей. По умолчанию будут выбраны все библиотеки, требующие обновления. Если необходимо, измените выбор. Нажмите *Далее*, чтобы продолжить.
+
.Выбор модулей для обновления
image::6.1@platform:admin:db-connect-update.png[Выбор модулей для обновления]
+
. На сервере Linux, в конфигурационном файле модулей укажите псевдоним и строку подключения к существующей БД в конфигурационном файле модуля {pl} и перезапустите службу *{sss-new}* командой:
+
[source,bash]
----
sudo systemctl restart dvappserver
----
+
. Подтвердите параметры подключения базы данных.
+
.Подтверждение параметров подключения БД
image::6.1@platform:admin:db-connect-check.png[Подтверждение параметров подключения БД]
+
include::6.1@platform:admin:partial$excerpts.adoc[tags=atomic]
+
Если выбранная база данных была подключена или подключена сейчас к другому серверу {dv}, и лицензия {dv} не позволяет работать с одной БД одновременно нескольким серверам {dv}, при нажатии кнопки *Далее* появится диалоговое окно. В диалоговом окне будут предложены варианты отключения БД.
+
.Диалоговое окно "Внимание: параллельные серверы"
image::6.1@platform:admin:parallel-servers.png[Диалоговое окно "Внимание: параллельные серверы"]
+
Нажмите на кнопку *Продолжить*, чтобы система автоматически отключила БД от других серверов {dv}.
+
Данная процедура подразумевает, что БД будет xref:6.1@platform:console:db-move.adoc[перемещена] (переключена) с одного сервера {dv} на другой.
+
. Дальнейшие шаги выполняются только если требуется обновление БД.
// - БД подключается из программы _{cns}_. При первоначальной настройке {dv} загрузка дополнительных модулей выполняется _Мастером настройки {dv}_.
+
. Дождитесь завершения загрузки SQL объектов.
+
. Выберите модули {dv}, настройки которых должны быть загружены в БД.  Не нажимая, кнопки *Завершить*, перейдите к следующему пункту инструкции.
+
.Выбор модулей для загрузки настроек в БД
image::6.1@platform:admin:db-create-modules.png[Выбор модулей для загрузки настроек в БД]
+
Существующие в БД настройки загружаемых модулей будут перезаписаны.
// . Согласитесь с перезапуском сервисов {dv}, чтобы применить новые параметры.
// +
// .Запрос на перезапуск сервисов {dv}
// image::admin:db-create-reload.png[Запрос на перезапуск сервисов {dv}]
// include::db-update.adoc[tags=special]
// +
+
. Нажмите *Завершить* и дождитесь завершения загрузки настроек.
. Предоставьте сервисам {dv} xref:admin:post-config-server.adoc#accounts[необходимые права], в т.ч. права на новую БД.
