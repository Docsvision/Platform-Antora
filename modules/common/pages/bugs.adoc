= Исправленные ошибки

include::webclient:admin:partial$table.adoc[]
|ERR-3872 (SUP-7522)
|В документации не было указано, что адрес _{of-mc}_ в _{cns}_ необходимо указывать с `/api` в конце.

|ERR-3951
|Возникала ошибка `Value cannot be null` при завершении задания, если не был задан тип ссылки связанного документа.

|ERR-3940 (SUP-7602)
|При открытии меню *Отправка* из главного меню задания у исполнителя отображалась пустая форма.

|ERR-3952 (SUP-7447)
|Хранимая процедура *dvbo_Operand_Document_TasktreeEmployees* для роли _Участник согласования_ по документу не срабатывала во время согласования.

|ERR-3909 (SUP-7561)
|Не удавалось заполнить поле, если в нём содержались кириллические символы.

|ERR-3891 (SUP-7546)
|После отмены усовершенствованного согласования задания не отзывались.

|ERR-3876 (SUP-7542)
|Ранее удалённый параметр verify при проверке простых подписей был возвращён.

|ERR-3766 (SUP-7475)
|При создании БД с флагом `UseOuterLog = True` возникала ошибка `Unclosed quotation mark after the character string '_Log];`.

|ERR-3756 (SUP-7428)
|Возникала ошибка `InvalidCursor` во время раскрытия группировки при неактивной сессии.

|ERR-3737 (SUP-7439)
|Работа пула при сохранении представления завершалась с ошибкой.

|ERR-3686 (SUP-7403)
|При обновлении до версии 5.5.5 не заменялась библиотека `DocsVision.Platform.SystemCards.ObjectModel.dll`.

|ERR-3526 (SUP-7278)
|В документации не хватало уточнения о необходимости прав superuser пользователя при использовании {pgsql}.

|ERR-3514 (SUP-7323)
|В документации информация по работе кэша в системе содержала неточности.

|ERR-3458 (SUP-7316)
|Возникала ошибка `отношение "backofficeprocs_pkey" не существует` при выполнении процедуры *dvsys_help_show_section_size*.

|ERR-3452 (SUP-7317)
|При выгрузке файлов журналов в файловую систему журналы предыдущего дня удалялись.

|ERR-3327 (SUP-7237)
|При обновлении библиотеки карточек новая версия записывалась даже в случае ошибки обновления, что делало библиотеку недоступной для повторного обновления.

|ERR-3323 (SUP-7266)
|При импорте карточки со связанными возникала ошибка `Violation of PRIMARY KEY constraint 'dvsys_links_pk_rowid_fieldid'. Cannot insert duplicate key in object 'dbo.dvsys_links'` если в карточке присутствовала слабая ссылка на другую карточку.

|ERR-3277 (SUP-7133)
|При обновлении БД возникала ошибка: `Error: The ALTER TABLE statement conflicted with the FOREIGN KEY constraint`.

|ERR-3269 / ERR-3267 (SUP-7229)
|В документации отсутствовала информация о том, что лицензия _{dv} Кластер AlwaysOn_ служит только для распределения нагрузки по read-only репликам. Также не были описаны различия между функциями "Отказоустойчивый кластер" и "Распределение нагрузки".

|ERR-3239 (SUP-7166)
|Исправлена ошибка, при которой БП с использованием ObjectContext неконтролируемо порождал новые бизнес-процессы.

|ERR-3178 (SUP-7081)
|В документации не было указано о том, что учётная запись, выполняющая сохранение журналов, должна иметь необходимые права на запись в указанную папку.

|ERR-3136 (SUP-7124)
|Возникала ошибка `Указанный метод не поддерживается` в серверном расширении {wc}а при попытке получения данных из объекта типа `InfoRowCollection (item.GetBytes("Data"))`.

|ERR-3020 (SUP-7048)
|Ошибка, возникающая при нажатии на кнопку *Показать изменения* и отсутствующем офисном редакторе была неинформативной.

|ERR-2999 (SUP-7045)
|Задание *clear_old_sessions_data* снимало блокировки с файлов.

|ERR-2976 (SUP-6998)
|Возникали критические блокировки при использовании служебной сессии и расширений.

|ERR-2930 (SUP-6887)
|При установленном флаге `*Оптимизировать загрузку представления по умолчанию*` сортировка в представлении применялась некорректно.

|ERR-2864 (SUP-6927)
|При сохранении представления возникала ошибка `ErrorPublishingView. System.Data.SqlClient.SqlException: The multi-part identifier "CurrentPerformers_1.Employee" could not be bound`.

|ERR-2853 (SUP-6920)
|Сессия не завершалась, если во время её работы выполнялся перезапуск IIS.

|ERR-2814 (SUP-6899)
|В документации отсутствовал раздел об особенностях разворачивания резервных копий БД с сателлитами.

|ERR-2689 (SUP-6638)
|При остановке экземпляров БП возникала ошибка в БП при условии, что два параллельных потока выполняли поиск по одинаковому searchXml.

|ERR-2604 (SUP-6711)
|При обновлении {dv} с версии 5.4 до 5.5.3 возникала ошибка `Error: The constraint 'dvsys_instances_pk_instanceid' is being referenced by table 'dvsys_dynamic_section_timestamp', foreign key constraint 'dvsys_dynamic_section_timestamp_fk_instanceid'`.

|ERR-2596 (SUP-6692)
|Возникала ошибка при завершении задания через Outlook 365.

|ERR-2578 (SUP-6699)
|Отображались карточки у пользователя, не имеющего прав на эти карточки.

|ERR-2568 (SUP-6667)
|Отображались карточки УЗ пула при возвращении сессии из offline, когда AccounName в таблице *dvsys_users* указывался в верхнем регистре.

|ERR-2541 (SUP-6676)
|При фильтрации данных представления по дате в результаты попадали все месяцы и годы.

|ERR-2513 (SUP-6397)
|После редактирования файла через Р7-Офис изменения не передавались в файл.

|ERR-2512 (SUP-6397)
|При создании согласования возникала ошибка `Значение не может быть неопределенным. Имя параметра: objectInstance`.

|ERR-2414 (SUP-6539)
|Когда в разметку справочника видов карточек был добавлен элемент управления `_Image_`, изображение не отображалось.

|ERR-2410 (SUP-6566)
|Gри обновлении модуля происходил сброс учетной записи для входа службы *{sss}*.

|ERR-2402 (SUP-6568)
|Исправлена ошибка, из-за которой служба *{sss}* некорректно вычисляла хеш-код дескрипторов безопасности, из-за чего они дублировались.

|ERR-2377 (SUP-6511)
|В журнал работы {dv} записывалась ошибка `The target database ('DatabaseName') is in an availability group and is currently accessible for connections when the application intent is set to read only`, когда настройка "Readable Secondaries" была в значении "No".

|ERR-2373 (SUP-6547)
|Возникала ошибка `Ссылка на объект не указывает на экземпляр объекта` при попытке переименовать операцию перехода.

|ERR-2372 (SUP-6546)
|Возникала ошибка `The file '/docsvision/StorageServer/Fetch.aspx' does not exist` после обновления системы с версии `5.4` до `5.5`.

|ERR-2215 (SUP-5815)
|Происходил перезапуск службы *{sss}* в случае недоступности внешнего сайта {dv} и открытии страницы в папке.

|ERR-2083 (SUP-6339)
|В документации ошибочно было указано, что для работы с архивными карточками нужно состоять в трёх группах, а не в любой из них: _{dv-arch-ops-dir}_, _{dv-ad-admins-dir}_, _{dv-sec-admins-dir}_.

|ERR-2021 (SUP-6306)
|Возникала ошибка `StorageServerRuntime Error: 0 : XML parsing: line 1, character 8000, unexpected end of input` при поисковом запросе, содержащем слово _Все подчиненные_.

|ERR-2001 (SUP-6294)
|Возникала ошибка аутентификации с паролем при подключении к Redis.

|ERR-1937 (SUP-6259)
|Возникала ошибка при использовании поискового запроса, использующего БП в коде скрипта: `В базе данных уже существует объект с указанным именем`.

|ERR-1904 (SUP-6252)
|Возникала ошибка `Child localization sections not exists` при раскрытии поля `*Поисковый запрос*` в программе _{kvr}_.

|ERR-1751 (SUP-6061)
|При закрытии сессий через REST SQL-соединение не возвращалось в пул, происходила утечка соединений.

|ERR-1724 (SUP-6110)
|Добавленный файл к карточке оставался в папке `C:\Windows\Temp\` и не удалялся из неё.

|ERR-1653 (SUP-6030)
|При попытке добавить или создать базу на PostgreSQL Возникала ошибка `System.TypeInitializationException: Инициализатор типа "DocsVision.Platform.Data.PgSqlDatabaseConnection" выдал исключение`.

|ERR-1649 (SUP-5549)
|Возникало ожидание в сессии, когда в одном потоке файл читался, а в другом изменялся.

|ERR-1607 (SUP-6032)
|Поисковое слово _Сегодня_ требовало временной части в поиске.

|ERR-1492 (SUP-5915)
|Возникала ошибка `ErrorPublishingView` при открытии представления, содержащего строковую константу и группу из ссылочного поля.

|ERR-1451 (SUP-5943)
|Когда для полнотекстового поиска использовалась внешняя база, создавались две пары заданий (jobs) *delete_old_files*.

|ERR-1426 (SUP-5919)
|Возникала ошибка в представлении из-за включенной настройки представления `*Раскрывать иерархию присоединяемого раздела*`

|ERR-1363 (SUP-5840)
|При создании БД {pgsql} возникала ошибка `DocsVision.Platform.Data.PgSqlDatabaseConnection`.

|ERR-1359 (SUP-5886)
|Не сохранялась самостоятельно реализованная метка подписи после переноса информации в карточку задания.

|ERR-1248 (SUP-5383)
|Назначенная персональная лицензия не освобождалась после ухода сессии пользователя в офлайн.

|ERR-1186 (SUP-5758)
|Исправлена ошибка, при которой отсутствовала возможность использовать аутентификацию Windows для {mssql} в утилите ChangeAccount.

|ERR-1155 (SUP-5733)
|Исправлена ошибка, слишком частого вызова процедуры *dvsys_dictionaries_get_info*, вызывавшего высокую нагрузку на сервер БД.

|ERR-1073 (SUP-5696)
|Исправлена ошибка, из-за которой по REST API не закрывались сессии {wc}а.

|ERR-1011 (SUP-5638)
|В документации не были указаны необходимые права для работы джоба `ObjectValidation`.

|ERR-1010 (SUP-5638)
|В документации не было указано, что для отображения путей к файловым провайдерам в настройках индексирования БД требуются права `serveradmin`.

|ERR-1007 (SUP-5638)
|При использовании пользователем БД роли *SQLAgentUserRole* было недостаточно прав на *sysjobschedules* при сохранении настроек БД.

|ERR-1005 (SUP-5622)
|Отображаемые поля сотрудников, настроенные в {wincl}е не отображались в {wc}е, либо приводили к ошибке `Internal exception, error code: InternalFailure`.

|ERR-993 (SUP-5634)
|В элементе управления `_Ссылки_` (Reference) не открывалась папка, заданная по умолчанию.

|ERR-957 (SUP-5588)
|Невозможно было авторизоваться в утилите DVExplorer, если в пароле пользователя содержался знак `;` (точка с запятой).

|ERR-936 (SUP-5583)
|Возникала ошибка при выполнении поискового запроса на REST если использовалось отдельное условие для каждой секции документа, и был установлен флаг `*Как группу*`.

|ERR-926 (SUP-5590)
|Карточки согласования делопроизводства 4.5 "Задание на согласование" и "Задание на консолидацию" не помечались как прочитанные в {wincl}е, но не РМА.

|ERR-884 (SUP-5552)
|Возникала ошибка `System.InvalidCastException` при открытии карточки с помощью скрипта.

|ERR-865 (SUP-5524)
|Исправлена ошибка, при которой библиотека не загружалась из справочника компонентов.

|ERR-843 (SUP-5486)
|Исправлена ошибка при использовании атрибутивного поиска: `DocsVision.Platform.ObjectManager.ObjectManagerException: Не удалось выполнить вызов SOAP метода. Сервер не ответил в течении заданного промежутка времени.`.

|ERR-828 (SUP-5502)
|Исправлена ошибка, при которой метод `SaveXML` для получения отчётов не выгружались ref-секции карточки в режиме REST.

|ERR-700 (SUP-1306)
|При копировании карточки документа копировался также список заданий.

|ERR-492 (SUP-5109)
|После обновления модуля {pl} возникали ошибки при назначении прав на пользовательские папки из-за кэширования несуществующих SDID.

|ERR-490 (SUP-5173)
|Некорректно переключалась разметка в {wincl}е при медленной скорости сетевого подключения.

|ERR-489 (SUP-5207)
|При использовании DVExplorer возникала ошибка с ActiveX компонентами при попытке использования сертификата SSL для аутентификации.

|ERR-486 (SUP-4007)
|Данные карточки не сохранялись после изменения ФИО контрагента (полного однофамильца) в разметке.

|ERR-485 (SUP-4454)
|В документации, в руководстве разработчика отсутствовало описание метода `ObjectContext.RefreshObject` и примеров его использования.

|ERR-483 (SUP-4490)
|После установки модуля пул сайта {dv} сбрасывался на стандартный _DefaultAppPool_.

|ERR-482 (SUP-4164)
|Записывалось неверное сообщение об ошибке при перемещении файлов во внешнее хранилище.

|ERR-481 (SUP-4848)
|Возникала SQL-ошибка при использовании большого поискового запроса (8 -- 10 слов), когда настроено несколько языков индексирования.

|ERR-478 (SUP-4578)
|Возникала ошибка при сохранении карточки с агрегацией в представлении: `Описание ошибки: (0x80040665) Произошла ошибка при публикации созданного представления.
DocsVision.Platform.StorageServer.SoapError: 1637, Internal exception, error code: ErrorPublishingView`.

|ERR-477 (SUP-4357)
|После обновления модуля {pl} таблица *dvsys_change_subscription* становилась пустой.

|ERR-476 (SUP-4272)
|Таблицы *log_application* имели в БД {mssql} неверное размещение.

|ERR-468 (SUP-3350)
|После закрытия файла с него не снималась блокировка, если файл был открыт по ссылке.

|ERR-462 (SUP-4646)
|Для модуля {pl} были добавлены исправления для очистки в БД записей с устаревшими дублирующими `ParentRowID` и `LocaleID`.

|ERR-461 (SUP-4643)
|При выполнении БП возникала ошибка `Указанный курсор не существует`.

|ERR-460 (SUP-4646)
|В справочники были добавлены ограничения, чтобы в БД локализованные значения оставались уникальными для `localeid`.

|ERR-458 (SUP-4785)
|При использовании поисковых слова _Подчиненный для_ и _Родитель для_ для поля вида _Подразделение_ возникала ошибка `Не удалось выполнить поиск. Возможно, запрос сформулирован некорректно, или не указаны значения обязательных параметров.`

|ERR-456 (SUP-4519 / SUP-4626)
|Возникала ошибка при работе с модулем Делопроизводство 4.5. При открытии поля со ссылкой на универсальный справочник отображались только узлы справочников.

|ERR-455 (SUP-4583)
|При настройке полнотекстового поиска {es} возникало сообщение о том, что индексы уже существуют, когда ранее БД была отключена от полнотекстового поиска с удалением индексов.

|ERR-454 (SUP-4922)
|Исправлено неинформативное сообщение об ошибке при создании объекта по названию его типа.

|ERR-451 (SUP-4937)
|Исправлена ошибка, когда название колонки представления не изменялось после настройки в РМА.

|ERR-449 (SUP-4391)
|При добавлении нескольких файлов в карточку документа возникала ошибка `Элемент с тем же ключом уже был добавлен`.

|ERR-448 (SUP-4384)
|Приложения ResourceKit завершались с ошибкой после открытия.

|ERR-446 (SUP-2747)
|Возникали ошибки `Произошла внутренняя ошибка сервера хранилища` и `Не удалось установить соединение с сервером, сервер не доступен` при работе с заданиями или лентой карточки.

|ERR-443 (SUP-2982)
|В карточке этапа согласования создавалось большое количество результатов согласования, если в этапе отсутствовали согласующие и в момент запуска этапа карточка документа была заблокирована.

|ERR-442 (SUP-2992)
|Исправлена ошибка, из-за которой по ссылке присоединялись секции карточки, что вызывало продолжительное выполнение SQL-процедур.

|ERR-441 (SUP-2992)
|Выполнение SQL-процедур занимало длительное время из-за нерелевантного плана выполнения присоединения системных таблиц.

|ERR-440 (SUP-3151)
|Процесс `CompleteChildTaskProcess` вызывал ошибку `D: Type Mismatch` в функции сценария.

|ERR-433 (SUP-1462)
|Отображался некорректный текст ошибки при отсутствии названия или расширения ограничений по типу файлов.

|ERR-432 (SUP-4462)
|Ошибка при использовании поиска в случае отключения службы ElasticSearch была неинформативной.

|ERR-429 (GBL-2283)
|Некорректно очищался журнал БП при заданном ограничении количества сообщений в нём.

|ERR-425 (SUP-6984)
|Пропадали записи из начала истории карточки.

|ERR-423
|Категория справочника категорий отображалась у пользователя, даже если у него не было доступа на весь справочник.

|ERR-421 (SUP-4962)
|Возникало ожидание блокировки уровня сессии в ObjectManager.

|ERR-419 (SUP-4909)
|При открытии группы в справочнике сотрудников возникала ошибка `Указанный курсор не существует`.

|ERR-418 (SUP-4534)
|Исправлена ошибка, когда при активном флаге `*На контроле*` задание не переводилось на приемку.

|ERR-416 (SUP-5102)
|Задание переходило на следующий этап, не дожидаясь завершения всех заданий в параллельном согласовании.

|ERR-414 (SUP-5179)
|Возникала ошибка `Ссылка на объект не указывает на экземпляр объекта` при назначении иконки на кнопку в конструкторе разметок.

|ERR-411 (SUP-5116)
|Когда не администратор нажимал кнопку *В работу* в карточке вида _Задание УД -- На исполнении_ возникала ошибка прав доступа.

|ERR-403 (SUP-5067)
|В документации не была описана настройка трассировки в конфигурационном файле _{wincl}а_.

|ERR-401 (SUP-5280)
|В документации было ошибочно указано о том, что в ЭУ `_Нумератор_` выводится сообщение об освобождении номера.

|ERR-400 (SUP-5326)
|У пользователя отсутствовали права доступа на редактирование подразделения, если он входил в группу, у которой такие права имелись.

|ERR-399 (SUP-5313)
|Возникало необрабатываемое исключение `Value cannot be null. Parameter name: localization.Value` при открытии любой разметки в конструкторе, когда не задана локализация перечисления.

|ERR-390 (SUP-5362)
|В документации не были указаны необходимые настройки для использования локальной отправки почты.

|ERR-389 (SUP-5376)
|Некорректно отображался список значений ЭУ `_Контрагент_`.

|ERR-387 (SUP-5189)
|При подключении к Redis с использованием пароля возникала ошибка: `RedisCheckConnectionError: It was not possible to connect to the redis server(s)`.

|ERR-386 (SUP-4842)
|При обновлении базы данных возникала ошибка ограничения внешнего ключа.

|ERR-384 (SUP-5013)
|Ипсравлена ошибка, при которой файлы `.zip` не индексировались полнотекстовым поиском Elastiсsearch.

|ERR-380 (SUP-5400)
|Исправлена ошибка, при которой во время универсального обмена данных отсутствовала конвертация из `decimal` в дробное число.

|ERR-374 (SUP-5402)
|В журнал FileService записывалась ошибка переноса бинарного файла, хотя файл успешно переносился.

|ERR-372 (SUP-5407)
|В документации не были указаны используемые для подписи компоненты и отсутствовала ссылка на внешнюю документацию.

|ERR-371 (SUP-5152)
|При попытке получить данные через веб-сервис {dv} методом `RowGetDataByInstanceID` возникала ошибка SOAP сервера `1281, Internal exception, error code: SQLFailure. --\-> Internal exception, error code: SQLFailure. --\-> Must declare the scalar variable "@InstanceI".`.

|ERR-370 (SUP-5405)
|Исправлена ошибка, при которой для каждого задания из группы заданий на исполнение устанавливаелся общий срок исполнения группы заданий, а не индивидуальные.

|ERR-365 (SUP-3749)
|Возникала ошибка `Field with this name not found` при загрузке библиотеки через CardManager, если в карточке присутствовали расширенные поля.

|ERR-364 (SUP-5410)
|В БД создавалась файловая группа *InMemoryFileGroup*, хотя она не была включена в настройках.

|ERR-361 (SUP-5297)
|В {wincl}е, на вкладке _Файлы и ссылки_ в задании не снималась блокировка с файла если закрыть карточку при открытом файле.

|ERR-359 (SUP-4942)
|Почтовые уведомления приходили без дополнительного файла, вне зависимости от флага `*Переносить дополнительные файлы*` в настройках вида карточек.

|ERR-244 (SUP-5363)
|Некорректно работал атрибутивный поиск в {wc}е при использовании БД PostgreSQL: чтобы найти карточки по дате, требовалось ввести предыдущий день.

|DV5-6830 (SUP-5361)
|Исправлена ошибка, при которой пул {wc}а прекращал работу с ошибкой `Index was outside the bounds of the array`.

|DV5-6818 (SUP-5355)
|Возникала ошибка при открытии представления: `STRING_AGG aggregation result exceeded the limit of 8000 bytes. Use LOB types to avoid result truncation`. Ошибка возникала, если в представлении использовалась агрегация, когда в строку таблицы добавлено значение более 8000 байт.

|DV5-6815 (SUP-5346)
|При поиске в личном помощнике возникала ошибка `Не удалось выполнить запрос поиска. 80040557: Процедура работы с данными ссылается на несуществующую таблицу или объект`.

|DV5-6814 (SUP-5339)
|Исправлена ошибка, из-за которой не работало вымещение файлов журнала на диск с сервером SQL.

|DV5-6802 (SUP-5312)
|Исправлена ошибка, не позволявшая редактировать справочник из конструктора справочников, открытого из карточки.

|DV5-6799 (SUP-5301)
|Возникала ошибка `Index was outside the bounds of the array` при повторном открытии программы _{cns}_ после установки расширения.

|DV5-6787 (SUP-5302)
|Исправлена ошибка в документации -- отсутствовало описание полей стандартных карточек для нескольких модулей.

|DV5-6785 (SUP-5299)
|В документации изменена формулировка "корневой сертификат КриптоПро" на "корневой сертификат удостоверяющего центра".

|DV5-6743 (SUP-5208)
|Исправлена ошибка при использовании {es}. Данные для создания индексов передавались только при перезагрузке службы, а не по завершении цикла.

|DV5-6735 (SUP-5057)
|Исправлена ошибка, вызывавшая долгое время ожидания при получении значений из справочника через ЭУ `_Сотрудник_` после перехода на версию модуля {pl} версии 5.5.

|DV5-6730 (SUP-5213)
|Возникала ошибка в работе представления: `Произошла SQL ошибка при выполнении операции с данными на сервере`.

|DV5-6728 (SUP-5141)
|{wincl} неожиданно прекращал работу после последовательного выполнения операций: Открытия карточки, Изменения полей карточки, Удаления файла без подписи, Добавления отсканированного файла с подписью.

|DV5-6281 (SUP-4380)
|После обновления модуля {pl} до версии 5.5.2 возникали ошибки при работе с кэш-сервером Redis.

|DV5-6155 (SUP-4321)
|При использовании полнотекстового поиска Microsoft SQL не учитывались изменения данные, перенесённые по ссылочным полям, в частности из справочников.

|DV5-6117 (SUP-4213)
|Исправлена ошибка, при которой простая подпись дополнительных файлов становилась невалидной.

|DV5-6058 (SUP-4187)
|При использовании модуля {pl} версии 5.5.2 не срабатывала настройка _Выгружать/очищать журнал, оставив в нем (кол-во сообщений)_ во время настройки архивирования журнала, если количество записей в журнале превышало установленное значение.

|DV5-4429 (SUP-2241)
|исправлена ошибка, при которой строка полнотекстового поиска оказывалась недоступной в {wincl}е.
|===